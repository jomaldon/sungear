(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(54)},52:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),i=n.n(o),l=n(17),c=n(14),s=(n(44),n(11)),u=n(31),h=n(1),f=n.n(h);var m={query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return t.query;case"CLEAR_QUERY":return"";default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA":return t.data;case"CLEAR_DATA":return{};default:return e}}},p=Object(s.c)(m);var d=function(){try{var e=localStorage.getItem("state");return null===e?void 0:JSON.parse(e)}catch(e){return}}(),v=s.d,y=Object(s.e)(p,d,v(Object(s.a)(u.a)));y.subscribe(f.a.throttle((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(e){try{localStorage.setItem("state","{}")}catch(e){}}}(y.getState())}),1e3));var b=y,g=n(4),E=n(2),w=n.n(E);function S(e){return{type:"SET_DATA",data:e}}function N(e,t){return function(n){var a={value:e};return t?(a.filter_list=t,fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return n(S(e))}))):fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return n(S(e))}))}}var k=n(15),x=n.n(k),C=n.p+"Nemhauser_et_al_hormones.txt";function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function M(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T(e);if(t){var r=T(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(i,e);var t,n,a,o=L(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={value:"",error:!1},t.fileInput=r.a.createRef(),t}return t=i,(n=[{key:"handleSubmit",value:function(e){e.preventDefault(),this.submit()}},{key:"handleChange",value:function(e){this.setState({value:e.target.value,error:!1})}},{key:"handleDrop",value:function(e){var t;if(e.preventDefault(),e.dataTransfer.items){var n,a=z(e.dataTransfer.items);try{for(a.s();!(n=a.n()).done;){var r=n.value;if("file"===r.kind){t=r.getAsFile();break}}}catch(e){a.e(e)}finally{a.f()}}else t=e.dataTransfer.files[0];t?this.handleFile(t):this.setState({value:e.dataTransfer.getData("text/plain"),error:!1})}},{key:"handleDragOver",value:function(e){e.preventDefault()}},{key:"handleDragEnter",value:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"handleFileInput",value:function(e){e.target.files&&this.handleFile(e.target.files[0])}},{key:"handleUploadClick",value:function(e){this.fileInput.current.click()}},{key:"handleFile",value:function(e){var t=this,n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(e){t.setState({value:e.target.result,error:!1})}}},{key:"submit",value:function(){var e=this,t=this.state.value;this.props.getSungear(t).then((function(){e.props.setQuery(t),e.props.history.push("/sungear")})).catch((function(){e.setState({error:!0})}))}},{key:"clear",value:function(){this.setState({value:"",error:!1})}},{key:"demoClick",value:function(e){var t=this;e.preventDefault(),fetch(C).then((function(e){return e.text()})).then((function(e){t.setState({value:e},t.submit.bind(t))})).catch((function(){t.setState({error:!0})}))}},{key:"render",value:function(){var e=this.state.error;return r.a.createElement("div",{className:"jumbotron bg-white"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",{className:"display-4"},"Sungear"),r.a.createElement("p",{className:"lead"},"Visualize Overlapping Lists!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group",onDragEnter:this.handleDragEnter.bind(this),onDragOver:this.handleDragOver.bind(this),onDrop:this.handleDrop.bind(this)},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:this.handleUploadClick.bind(this)},"Upload")),r.a.createElement("textarea",{className:x()("form-control",e&&"is-invalid"),placeholder:"Input Lists Here",rows:5,onChange:this.handleChange.bind(this),value:this.state.value}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:this.clear.bind(this)},"Clear"),r.a.createElement("button",{className:"btn btn-primary"},"Submit"))),r.a.createElement("small",null,"You can also drag and drop text files."),r.a.createElement("small",{className:"form-text text-muted"},r.a.createElement("a",{href:"#",onClick:this.demoClick.bind(this)},"Demo")," — Click for a quick demo of Sungear's capabilities."),r.a.createElement("small",{className:"form-text text-muted"},r.a.createElement("a",{href:C,download:!0},"sample file")," — Edit and re-upload to create a customized graph.")),r.a.createElement("input",{type:"file",hidden:!0,ref:this.fileInput,onChange:this.handleFileInput.bind(this)}))))))}}])&&M(t.prototype,n),a&&M(t,a),i}(r.a.Component);A.propTypes={getSungear:w.a.func,setQuery:w.a.func,history:w.a.object};var I=Object(c.b)(null,{getSungear:N,setQuery:function(e){return{type:"SET_QUERY",query:e}}})(A),D=n(5),_=n(32),U=n.n(_),F=n(33);function V(e){return new RegExp("^"+f.a.escapeRegExp(e),"i")}var B=n(12);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Y=function(e){return r.a.createElement("svg",q({version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"454.815px",height:"454.815px",viewBox:"0 0 454.815 454.815",style:"enable-background:new 0 0 454.815 454.815;",xmlSpace:"preserve"},e),r.a.createElement("g",null,r.a.createElement("path",{d:"M320.021,92.61c-35.843,0-68.447,14.091-92.613,36.98c-24.169-22.896-56.767-36.98-92.609-36.98 C60.47,92.61,0,153.08,0,227.411c0,74.322,60.47,134.795,134.798,134.795c35.843,0,68.44-14.091,92.609-36.983 c24.166,22.898,56.771,36.983,92.613,36.983c74.322,0,134.795-60.473,134.795-134.795C454.815,153.08,394.343,92.61,320.021,92.61z M134.798,350.1c-67.658,0-122.693-55.047-122.693-122.689c0-67.651,55.041-122.695,122.693-122.695 c32.58,0,62.16,12.85,84.143,33.641c-20.965,23.768-33.727,54.947-33.727,89.055c0,34.117,12.761,65.29,33.727,89.063 C196.958,337.25,167.378,350.1,134.798,350.1z M197.319,227.411c0-30.683,11.405-58.708,30.088-80.241 c18.682,21.533,30.089,49.559,30.089,80.241c0,30.677-11.407,58.706-30.089,80.232 C208.724,286.117,197.319,258.087,197.319,227.411z M320.021,350.1c-32.58,0-62.164-12.85-84.146-33.638 c20.965-23.773,33.727-54.946,33.727-89.063c0-34.111-12.762-65.287-33.727-89.055c21.987-20.791,51.565-33.641,84.146-33.641 c67.654,0,122.689,55.042,122.689,122.696C442.71,295.042,387.675,350.1,320.021,350.1z M235.438,170.665h-17.901v-6.053h17.901 V170.665z M219.177,284.154h17.904v6.053h-17.904V284.154z M247.803,192.103h-39.345v-6.053h39.345V192.103z M251.586,211.52 h-50.053v-6.052h50.053V211.52z M253.347,225.392v6.05h-51.881v-6.05H253.347z M204.051,245.167h46.695v6.053h-46.695V245.167z M208.458,264.483h35.562v6.053h-35.562V264.483z"})),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null))};function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var H=function(e){return r.a.createElement("svg",X({version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"454.815px",height:"454.815px",viewBox:"0 0 454.815 454.815",style:"enable-background:new 0 0 454.815 454.815;",xmlSpace:"preserve"},e),r.a.createElement("g",null,r.a.createElement("path",{d:"M320.021,92.61c-35.843,0-68.447,14.091-92.613,36.98c-24.169-22.896-56.767-36.98-92.609-36.98 C60.47,92.61,0,153.08,0,227.411c0,74.322,60.47,134.795,134.798,134.795c35.843,0,68.44-14.091,92.609-36.983 c24.166,22.898,56.771,36.983,92.613,36.983c74.322,0,134.795-60.473,134.795-134.795C454.815,153.08,394.343,92.61,320.021,92.61z M134.798,350.1c-67.658,0-122.693-55.047-122.693-122.689c0-67.651,55.041-122.695,122.693-122.695 c32.58,0,62.16,12.85,84.143,33.641c-20.965,23.768-33.727,54.947-33.727,89.055c0,34.117,12.761,65.29,33.727,89.063 C196.958,337.25,167.378,350.1,134.798,350.1z M197.319,227.411c0-30.683,11.405-58.708,30.088-80.241 c18.682,21.533,30.089,49.559,30.089,80.241c0,30.677-11.407,58.706-30.089,80.232 C208.724,286.117,197.319,258.087,197.319,227.411z M320.021,350.1c-32.58,0-62.164-12.85-84.146-33.638 c20.965-23.773,33.727-54.946,33.727-89.063c0-34.111-12.762-65.287-33.727-89.055c21.987-20.791,51.565-33.641,84.146-33.641 c67.654,0,122.689,55.042,122.689,122.696C442.71,295.042,387.675,350.1,320.021,350.1z M27.249,192.363l-4.28-4.279l74.99-74.993 l4.279,4.28L27.249,192.363z M21.952,226.282l-4.279-4.279l110.738-110.744l4.279,4.279L21.952,226.282z M183.937,217.747 L73.199,328.497l-4.279-4.279L179.657,213.47L183.937,217.747z M183.937,250.977l-86.62,86.634l-4.279-4.279l86.625-86.634 L183.937,250.977z M116.179,340.548l70.3-70.308l4.279,4.279l-70.3,70.309L116.179,340.548z M144.42,343.084l52.742-52.754 l4.279,4.279L148.7,347.364L144.42,343.084z M157.773,118.975L22.41,254.34l-4.279-4.279l135.363-135.366L157.773,118.975z M180.378,124.398L30.274,274.52l-4.279-4.279l150.11-150.122L180.378,124.398z M202.955,133.356L39.989,296.319l-4.279-4.279 l162.965-162.963L202.955,133.356z M186.934,181.638L54.231,314.329l-4.279-4.279l132.697-132.697L186.934,181.638z M428.784,192.363l-74.989-74.993l4.279-4.28l74.989,74.993L428.784,192.363z M434.08,226.282L323.343,115.543l4.279-4.279 l110.737,110.744L434.08,226.282z M276.363,213.47l110.744,110.747l-4.279,4.279l-110.744-110.75L276.363,213.47z M276.363,246.698 l86.622,86.634l-4.279,4.279l-86.622-86.634L276.363,246.698z M269.542,270.241l70.303,70.308l-4.279,4.28l-70.303-70.309 L269.542,270.241z M258.861,290.331l52.742,52.754l-4.279,4.279l-52.736-52.754L258.861,290.331z M302.536,114.695l135.356,135.366 l-4.279,4.279L298.257,118.975L302.536,114.695z M279.922,120.119l150.115,150.122l-4.279,4.279L275.648,124.398L279.922,120.119z M257.349,129.076L420.314,292.04l-4.279,4.279l-162.96-162.963L257.349,129.076z M273.379,177.353l132.702,132.697l-4.279,4.279 L269.099,181.638L273.379,177.353z M234.716,169.654h-17.9v-6.053h17.9V169.654z M218.456,283.137h17.904v6.053h-17.904V283.137z M247.081,191.092h-39.345v-6.053h39.345V191.092z M250.864,210.509h-50.052v-6.052h50.052V210.509z M252.626,224.381v6.056 h-51.879v-6.056H252.626z M203.324,244.162h46.695v6.053h-46.695V244.162z M207.736,263.466h35.562v6.053h-35.562V263.466z"})),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null),r.a.createElement("g",null))},K=n(19),W=n.n(K),J=n(6),Q=n(22),$=n.n(Q);n(51),n(52);function G(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||Z(e)||me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function ee(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=me(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function re(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),e}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ue(e);if(t){var r=ue(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ce(this,n)}}function ce(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?se(e):t}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return de(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||me(e,t)||fe()}function fe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function me(e,t){if(e){if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function de(e){if(Array.isArray(e))return e}B.b.add(J.j,J.i,J.c,J.g,J.l,J.k);var ve=f.a.flow(f.a.partial(f.a.clamp,f.a,Number.MIN_VALUE,Number.MAX_VALUE),Math.log10,(function(e){return-1*e}));function ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.05,a=W.a.hex.rgb(e),r=W.a.hex.rgb(t),o=ve(n);return function(n,i,l){if(n<o)return e;if(i===l)return t;if(i>l){var c=[l,i];i=c[0],l=c[1]}var s=(n-i+1)/(l-i+1);return"#"+W.a.rgb.hex(f()(a).zip(r).map((function(e){var t=he(e,2),n=t[0],a=t[1];return n*(1-s)+a*s})).value())}}var be=ye("#fff","#b40426"),ge=ye("#fff","#3b4cc0");function Ee(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return[e[0]*t+n,e[1]*t+a]}var Se=function(e){oe(n,e);var t=le(n);function n(){return ne(this,n),t.apply(this,arguments)}return re(n,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.x,a=e.y,o={display:t?"block":"none",position:"fixed",left:"".concat(n,"px"),top:"".concat(a,"px"),fontSize:"0.8em"};return r.a.createElement("div",{style:o,className:"border bg-white px-2"},this.props.children)}}]),n}(r.a.PureComponent);function Ne(){this.updateOptions({tooltips:!0})}function ke(){this.updateOptions({tooltips:!1})}Se.propTypes={show:w.a.bool.isRequired,x:w.a.number.isRequired,y:w.a.number.isRequired,children:w.a.node};var xe=function(e){oe(n,e);var t=le(n);function n(e){var a;return ne(this,n),(a=t.call(this,e)).containerRef=r.a.createRef(),a.sliderOverRef=r.a.createRef(),a.sliderUnderRef=r.a.createRef(),a.state={lock:!1},a}return re(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.maxLogP;this.sliderOver=$.a.create(this.sliderOverRef.current,{start:[0],connect:!0,range:{min:0,max:t}}),this.sliderUnder=$.a.create(this.sliderUnderRef.current,{start:[0],connect:!0,range:{min:0,max:t}}),this.sliderOver.on("slide",(function(t){e.state.lock&&e.sliderUnder.set(t)})),this.sliderUnder.on("slide",(function(t){e.state.lock&&e.sliderOver.set(t)})),this.sliderOver.on("update",this.props.onOverChange),this.sliderUnder.on("update",this.props.onUnderChange),this.sliderOver.on("start",Ne),this.sliderUnder.on("start",Ne),this.sliderOver.on("end",ke),this.sliderUnder.on("end",ke)}},{key:"componentDidUpdate",value:function(e,t){this.state.lock!==t.lock&&this.state.lock&&this.sliderUnder.set(this.sliderOver.get())}},{key:"toggleLock",value:function(){this.setState({lock:!this.state.lock})}},{key:"refresh",value:function(){this.sliderOver.set(0),this.sliderUnder.set(0)}},{key:"render",value:function(){return r.a.createElement("div",{className:"mx-2 d-flex flex-column align-items-center",ref:this.containerRef},r.a.createElement("div",{style:{fontSize:"8px"}},"Overrepresented"),r.a.createElement("div",{className:"p-0 mx-2"},r.a.createElement("div",{ref:this.sliderOverRef,className:"slider slider-over"}),r.a.createElement("div",{ref:this.sliderUnderRef,className:"slider slider-under"})),r.a.createElement("div",{style:{fontSize:"8px"}},"Underrepresented"),r.a.createElement("div",null,r.a.createElement("span",{onClick:this.toggleLock.bind(this),className:"mx-1"},this.state.lock?r.a.createElement(D.a,{icon:"lock"}):r.a.createElement(D.a,{icon:"unlock"})),r.a.createElement("span",{onClick:this.refresh.bind(this),className:"mx-1"},r.a.createElement(D.a,{icon:"sync"}))))}}]),n}(r.a.Component);xe.propTypes={onOverChange:w.a.func,onUnderChange:w.a.func,maxLogP:w.a.number};var Ce=function(e){oe(n,e);var t=le(n);function n(e){var a;return ne(this,n),(a=t.call(this,e)).canvas=r.a.createRef(),a.state={selectMode:"union",toolTipX:0,toolTipY:0,toolTipShow:!1,toolTipContent:null,maxLogP:0,cutoffOverP:0,cutoffUnderP:0},a.circles=[],a.labels=[],a.mousedown=!1,a.mousedownStart=0,a.scale=1,a.vX=0,a.vY=0,a.prevX=0,a.prevY=0,a.handleScroll=a.handleScroll.bind(se(a)),a.handleDrag=a.handleDrag.bind(se(a)),a.onOverChange=f.a.throttle(a.onOverChange.bind(se(a)),100),a.onUnderChange=f.a.throttle(a.onUnderChange.bind(se(a)),100),a}return re(n,[{key:"componentDidMount",value:function(){var e=this;this.paper=U()(this.canvas.current),this.paper.setViewBox=f.a.throttle(this.paper.setViewBox.bind(this.paper),100),this.canvas.current.addEventListener("wheel",this.handleScroll),this.canvas.current.addEventListener("drag",this.handleDrag),this.canvas.current.addEventListener("mousedown",(function(t){e.prevX=t.x,e.prevY=t.y,e.mousedown=!0,e.mousedownStart=t.timeStamp})),this.canvas.current.addEventListener("mouseup",(function(){e.mousedown=!1})),this.canvas.current.addEventListener("click",(function(t){t.timeStamp-e.mousedownStart<500&&e.props.onSelectChange([])})),this.canvas.current.addEventListener("mousemove",this.handleDrag)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.width,r=n.height,o=n.data,i=n.selected,l=n.vertexFormatter,c=n.strokeColor,s=n.alwaysShowArrows,u=n.showNodeSize;if(r===e.height&&a===e.width||this.paper.setSize(a,r),f.a.isEmpty(o)||!a||!r||r===e.height&&a===e.width&&o===e.data&&l===e.vertexFormatter&&s===e.alwaysShowArrows&&u===e.showNodeSize&&this.state.cutoffOverP===t.cutoffOverP&&this.state.cutoffUnderP===t.cutoffUnderP||this.draw(),o===e.data||f.a.isEmpty(o)||this.resetView(),i!==e.selected){var h,m=ee(this.circles.entries());try{for(m.s();!(h=m.n()).done;){var p=he(h.value,2),d=p[0],v=p[1];v&&(-1!==i.indexOf(d)?v.attr("stroke",c):v.attr("stroke","#000"))}}catch(e){m.e(e)}finally{m.f()}}if(c!==e.strokeColor&&i===e.selected){var y,b=ee(i);try{for(b.s();!(y=b.n()).done;){var g=y.value;this.circles[g].attr("stroke",c)}}catch(e){b.e(e)}finally{b.f()}}}},{key:"draw",value:function(){var e,t,n=this,a=this,o=this.props,i=o.height,l=o.width,c=o.data,s=o.onSelectChange,u=o.vertexFormatter,h=o.alwaysShowArrows,m=o.showNodeSize,p=this.state,d=p.cutoffOverP,v=p.cutoffUnderP,y=Math.min(l,i),b=[y/2,y/2],g=f.a.partial(we,f.a,y);this.circles=[],this.labels=[],this.paper.clear();var E=f.a.map(c.vertices,(function(e){var t=he(e,2),n=t[0],a=t[1];return[n,g(a)]})),w=f.a.map(E,1),S=f.a.map(c.intersects,(function(e){var t=he(e,6),n=t[0],a=t[1],r=t[2],o=t[3],i=t[4],l=t[5];return[n,g(a),r,o,i*y,f.a.map(l,f.a.unary(g))]})),N=f()(S).map(3).map("adj_p").map(ve).value(),k=f.a.min(N),x=f.a.max(N);this.setState({maxLogP:x});var C,O=f.a.unary(f.a.partial(be,f.a,k,x)),z=f.a.unary(f.a.partial(ge,f.a,k,x)),j=f()(S).zip(N).map((function(e){var t=he(e,2),n=t[0],a=t[1];return n[3].expected<n[2].length?[O(a),a>=d]:[z(a),a>=v]})).value(),M=he(f.a.zip.apply(f.a,G(j)),2),R=M[0],L=M[1];if(2===f.a.size(w))e=Ee.apply(void 0,G(w[0]).concat(G(w[1])))/2,this.paper.path("\n        M ".concat(w[0][0]," ").concat(w[0][1],"\n        A ").concat(e," ").concat(e," 0 0 1 ").concat(w[1][0]," ").concat(w[1][1],"\n        A ").concat(e," ").concat(e," 0 0 1 ").concat(w[0][0]," ").concat(w[0][1],"\n      ")),t=e;else{var P=de(C=w)||Z(C)||me(C)||fe(),T=P[0],A=P.slice(1);e=(t=Ee.apply(void 0,G(T).concat(G(w[1]))))/(2*Math.tan(Math.PI/w.length)),this.paper.path("M ".concat(T[0]," ").concat(T[1],"\n")+f()([].concat(G(A),[T])).map((function(e){return"L ".concat(e[0]," ").concat(e[1])})).join("\n"))}var I,D=ee(E.entries());try{var _=function(){var e,r,o,i=he(I.value,2),l=i[0],c=he(i[1],2),h=c[0],m=c[1],p=(r=b,[(o=m)[0]-r[0],o[1]-r[1]]),d=Ee.apply(void 0,G(p).concat([0,0])),v=function(e,t){return[t[0]+e[0],t[1]+e[1]]}(we(p,(20+d)/d),b),y=(360-360/E.length*l)%360,g=(e=n.paper).text.apply(e,G(v).concat([u[h]||h.toString()])),w=g.getBBox().width;if(n.labels.push(g),y<270&&y>90?g.rotate(y-180):g.rotate(y),w>t){var N=t/w;g.scale(N,N)}g.mouseover((function(){var e=a.props.fillColor;this.attr("fill",e),f.a.forEach(S,(function(t,n){if(-1!==f.a.findIndex(t[0],(function(e){return f.a.isEqual(e,h)}))){var r=a.circles[n];r&&r.attr("fill",e)}}))})),g.mouseout((function(){this.attr("fill","#000"),f.a.forEach(S,(function(e,t){if(-1!==f.a.findIndex(e[0],(function(e){return f.a.isEqual(e,h)}))){var n=a.circles[t];n&&n.attr("fill",R[t])}}))})),g.click((function(e){e.stopPropagation();var t=n.props.selected,a=f()(S).map((function(e,t){if(-1!==f.a.findIndex(e[0],(function(e){return f.a.isEqual(e,h)})))return t})).zip(L).map((function(e){var t=he(e,2),n=t[0];return t[1]?n:void 0})).filter(f.a.negate(f.a.isUndefined)).value();e.metaKey||e.shiftKey||e.ctrlKey?"union"!==n.state.selectMode&&t.length?s(f.a.uniq(f.a.intersection(t,a))):s(f.a.uniq([].concat(G(t),G(a)))):e.altKey?s(f.a.difference(t,a)):s(a)}))};for(D.s();!(I=D.n()).done;)_()}catch(e){D.e(e)}finally{D.f()}var U,F=f()(S).map(5).map(f.a.size).sum(),V=ee(S.entries());try{var B=function(){var e,t=he(U.value,2),o=t[0],i=t[1];if(!L[o])return n.circles.push(void 0),"continue";var l=(e=n.paper).circle.apply(e,G(i[1]).concat([i[4]])),c=n.paper.set(),u=void 0;if(m){var p,d=(u=(p=n.paper).text.apply(p,G(i[1]).concat([i[2].length.toString()]))).getBBox(),v=Math.max(d.width,d.height);if(v>i[4]){var y=i[4]/v;u.scale(y,y)}}var b=R[o];if(n.circles.push(l),l.attr("fill",b),l.click((function(e){e.stopPropagation();var t=n.props.selected;e.metaKey||e.shiftKey||e.ctrlKey?-1===t.indexOf(o)?s([].concat(G(t),[o])):s(t.filter((function(e){return e!==o}))):s([o]),f.a.isFunction(a.props.onNodeClick)&&a.props.onNodeClick(i)})),l.mouseover((function(){var e=a.props.fillColor;a.setState({toolTipShow:!0,toolTipContent:r.a.createElement("div",null,r.a.createElement("p",{className:"mb-0"},"p-value: ",i[3].p_value.toExponential(3)),r.a.createElement("p",{className:"mb-0"},"adjusted p-value: ",i[3].adj_p.toExponential(3)),r.a.createElement("p",{className:"mb-0"},"size: ",i[2].length),r.a.createElement("p",{className:"mb-0"},"expected: ",i[3].expected.toFixed(3)))}),this.attr("fill",e);var t,n=ee(i[0]);try{var o=function(){var n=t.value;a.labels[f.a.findIndex(E,(function(e){return f.a.isEqual(e[0],n)}))].attr("fill",e)};for(n.s();!(t=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}c.toFront(),this.toFront(),u&&u.toFront()})),l.mouseout((function(){this.attr("fill",b),a.setState({toolTipShow:!1});var e,t=ee(i[0]);try{var n=function(){var t=e.value;a.labels[f.a.findIndex(E,(function(e){return f.a.isEqual(e[0],t)}))].attr("fill","#000")};for(t.s();!(e=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}})),F<600||h){var g,w=ee(i[5]);try{for(w.s();!(g=w.n()).done;){var S=g.value,N=n.paper.path("\n          M ".concat(i[1][0]," ").concat(i[1][1],"\n          L ").concat(S[0]," ").concat(S[1],"\n          "));N.attr("arrow-end","classic"),c.push(N)}}catch(e){w.e(e)}finally{w.f()}}else l.mouseover((function(){var e,t=ee(i[5]);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=a.paper.path("\n            M ".concat(i[1][0]," ").concat(i[1][1],"\n            L ").concat(n[0]," ").concat(n[1],"\n            "));r.attr("arrow-end","classic"),c.push(r)}}catch(e){t.e(e)}finally{t.f()}})),l.mouseout((function(){c.remove(),c.clear()}));c.toBack()};for(V.s();!(U=V.n()).done;)B()}catch(e){V.e(e)}finally{V.f()}}},{key:"handleScroll",value:function(e){e.preventDefault();var t=e.deltaY;t>0?this.zoomOut():t<0&&this.zoomIn()}},{key:"handleDrag",value:function(e){e.preventDefault();var t=e.x,n=e.y;this.mousedown?(this.vX+=(this.prevX-t)*this.scale,this.vY+=(this.prevY-n)*this.scale,this.prevX=t,this.prevY=n,this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)):this.setState({toolTipX:t+10,toolTipY:n+10})}},{key:"resetView",value:function(){this.scale=1,this.vX=0,this.vY=0,this.paper.setViewBox(0,0,this.vW,this.vH)}},{key:"zoomIn",value:function(){this.scale*=.95,this.scale=Math.max(this.scale,.1),this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)}},{key:"zoomOut",value:function(){this.scale*=1.05,this.scale=Math.min(this.scale,10),this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)}},{key:"setSelectMode",value:function(e){this.setState({selectMode:e})}},{key:"onOverChange",value:function(e,t){this.setState({cutoffOverP:parseFloat(e[t])})}},{key:"onUnderChange",value:function(e,t){this.setState({cutoffUnderP:parseFloat(e[t])})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.width,a=e.height,o=this.state,i=o.selectMode,l=o.toolTipX,c=o.toolTipY,s=o.toolTipShow,u=o.toolTipContent,h=o.maxLogP;return r.a.createElement("div",{style:{width:n,height:a,position:"relative"}},r.a.createElement("div",{ref:this.canvas,className:t}),r.a.createElement("div",{className:"d-flex flex-column",style:{position:"absolute",top:"10px",left:"10px"}},r.a.createElement("div",{className:"btn-group-vertical mb-2"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.resetView.bind(this)},r.a.createElement(D.a,{icon:"expand",className:"mr-1"})),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.zoomIn.bind(this)},r.a.createElement(D.a,{icon:"search-plus",className:"mr-1"})),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.zoomOut.bind(this)},r.a.createElement(D.a,{icon:"search-minus",className:"mr-1"}))),r.a.createElement("div",{className:"btn-group-vertical"},r.a.createElement("button",{type:"button",className:x()("btn btn-primary py-0 px-1","union"===i&&"active"),onClick:this.setSelectMode.bind(this,"union"),title:"union"},r.a.createElement(H,{width:"32",height:"32",viewBox:"0 93 455 270",style:{fill:"#ffffff"}})),r.a.createElement("button",{type:"button",className:x()("btn btn-primary py-0 px-1","intersection"===i&&"active"),onClick:this.setSelectMode.bind(this,"intersection"),title:"intersection"},r.a.createElement(Y,{width:"32",height:"32",viewBox:"0 93 455 270",style:{fill:"#ffffff"}})))),r.a.createElement(Se,{x:l,y:c,show:s},u),r.a.createElement("div",{style:{position:"absolute",right:"10px",bottom:"10px",background:"rgba(255, 255, 255, 0.7)"},className:"d-flex align-items-center border rounded px-2 py-0"},r.a.createElement("div",{className:"mr-1"},"-Log10 p-value"),r.a.createElement("div",null,"≤",-Math.log10(.05).toFixed(2)),h?r.a.createElement(xe,{onOverChange:this.onOverChange,onUnderChange:this.onUnderChange,maxLogP:h}):null,r.a.createElement("div",null,h.toFixed(2))))}},{key:"vW",get:function(){return this.paper.width*this.scale}},{key:"vH",get:function(){return this.paper.height*this.scale}}]),n}(r.a.Component);Ce.propTypes={className:w.a.string,width:w.a.number,height:w.a.number,data:w.a.object.isRequired,selected:w.a.array,onSelectChange:w.a.func,vertexFormatter:w.a.object,fillColor:w.a.string,strokeColor:w.a.string,onNodeClick:w.a.func,alwaysShowArrows:w.a.bool,showNodeSize:w.a.bool},Ce.defaultProps={width:1280,height:800,onSelectChange:f.a.noop,vertexFormatter:{},fillColor:"#257AFD",strokeColor:"#257AFD",alwaysShowArrows:!1,showNodeSize:!1};var Oe=function(e){oe(n,e);var t=le(n);function n(){return ne(this,n),t.apply(this,arguments)}return re(n,[{key:"renderItem",value:function(e){var t=e.index,n=e.style;return r.a.createElement("li",{className:"list-group-item",style:n},this.props.items[t])}},{key:"render",value:function(){return r.a.createElement(F.a,{className:this.props.className,ref:this.props.listRef,innerElementType:"ul",itemSize:50,height:this.props.height,itemCount:this.props.items.length},this.renderItem.bind(this))}}]),n}(r.a.PureComponent);Oe.propTypes={items:w.a.array.isRequired,height:w.a.number.isRequired,listRef:w.a.object,className:w.a.string};var ze=function(e){oe(n,e);var t=le(n);function n(e){var a;return ne(this,n),(a=t.call(this,e)).searchIntersects=f.a.debounce(a.searchIntersects.bind(se(a)),150),a}return re(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.value;t!==e.value&&this.searchIntersects(t)}},{key:"searchIntersects",value:function(e){var t=this.props,n=t.onSelectChange,a=t.data;if(e){var r=V(e);n(f()(a.intersects).map((function(e,t){if(-1!==f.a.findIndex(e[2],(function(e){return r.test(e)})))return t})).filter(f.a.negate(f.a.isUndefined)).value())}else n([])}},{key:"render",value:function(){return r.a.createElement("input",{type:"search",className:"form-control",placeholder:"Search",value:this.props.value,onChange:this.props.onChange})}}]),n}(r.a.Component);ze.propTypes={value:w.a.string,onChange:w.a.func,selected:w.a.array,onSelectChange:w.a.func,data:w.a.object};var je=function(e){oe(n,e);var t=le(n);function n(e){var a;return ne(this,n),(a=t.call(this,e)).state={nodeByCount:[]},a}return re(n,[{key:"componentDidMount",value:function(){this.prepCounts()}},{key:"componentDidUpdate",value:function(e){this.props.data!==e.data&&this.prepCounts()}},{key:"prepCounts",value:function(){var e=this.props.data;this.setState({nodeByCount:f()(f.a.reduce(e.intersects,(function(e,t,n){var a=t[0].length;return a in e?e[a].push(n):e[a]=[n],e}),{})).toPairs().map((function(t){var n=he(t,2),a=n[0],r=n[1];return[parseInt(a),r.length,f()(r).map((function(t){return e.intersects[t][2].length})).sum(),r]})).orderBy([0],["asc"]).value()})}},{key:"onRowSelect",value:function(e,t){var n=this.props,a=n.onSelectChange,r=n.selected,o=!f.a.difference(e[3],r).length;t.metaKey||t.shiftKey||t.ctrlKey?a(o?f.a.difference(r,e[3]):f.a.uniq(r.concat(e[3]))):o&&!f.a.difference(r,e[3]).length?a([]):a(e[3])}},{key:"render",value:function(){var e=this,t=this.props.selected,n=this.state.nodeByCount;return r.a.createElement("div",{style:{maxHeight:"300px",overflow:"scroll"}},r.a.createElement("table",{className:"table table-bordered table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No. Vertices"),r.a.createElement("th",null,"No. Vessels"),r.a.createElement("th",null,"No. Items"))),r.a.createElement("tbody",null,f.a.map(n,(function(n,a){return r.a.createElement("tr",{key:a,className:x()(!f.a.difference(n[3],t).length&&"table-primary"),onClick:e.onRowSelect.bind(e,n)},r.a.createElement("td",null,n[0]),r.a.createElement("td",null,n[1]),r.a.createElement("td",null,n[2]))})))))}}]),n}(r.a.PureComponent);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e){return function(e){if(Array.isArray(e))return e}(e)||Te(e)||Pe(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||Te(e)||Pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}function Te(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function De(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Fe(e,t,n){return t&&Ue(e.prototype,t),n&&Ue(e,n),e}function Ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=He(e);if(t){var r=He(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ye(this,n)}}function Ye(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?Xe(e):t}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}je.propTypes={data:w.a.object,selected:w.a.arrayOf(w.a.number),onSelectChange:w.a.func},B.b.add(J.h,J.e,J.k,J.a,J.b,J.f,J.d);var Ke,We=(Ke=Oe,function(e){Ve(n,e);var t=qe(n);function n(e){var a;return _e(this,n),(a=t.call(this,e)).itemRef=r.a.createRef(),a.state={height:0},a.setSize=f.a.throttle(a.setSize.bind(Xe(a)),100),a}return Fe(n,[{key:"componentDidMount",value:function(){this.setSize(),window.addEventListener("resize",this.setSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setSize",value:function(){var e=document.documentElement.clientHeight;this.setState({height:Math.min(Math.max(e-this.itemRef.current.getBoundingClientRect().top,200),e/2)})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.innerClassName,a=De(e,["className","innerClassName"]);return r.a.createElement("div",{ref:this.itemRef,className:t},r.a.createElement(Ke,Ie({height:this.state.height,className:n},a)))}}]),n}(r.a.Component));var Je=function(e){Ve(n,e);var t=qe(n);function n(e){var a;return _e(this,n),(a=t.call(this,e)).canvas=r.a.createRef(),a.listRef=r.a.createRef(),a.state={height:0,width:0,data:{},items:[],itemsCurr:[],itemsPast:[],itemsFuture:[],selected:[],searchTerm:"",selectColor:"#257AFD",alwaysShowArrows:!1,showNodeSize:!1},a.setSize=f.a.throttle(a.setSize.bind(Xe(a)),100),a}return Fe(n,[{key:"componentDidMount",value:function(){this.setSize(),window.addEventListener("resize",this.setSize)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.state.selected!==t.selected){var a=f()(this.state.selected).map((function(e){return n.props.data.intersects[e][2]})).flatten().sortBy().value();this.setState({items:a},(function(){var e=n.state.searchTerm;if(e){var t=V(e),r=f.a.findIndex(a,(function(e){return t.test(e)}));-1!==r&&n.listRef.current.scrollToItem(r,"start")}}))}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setSize",value:function(){var e=this.canvas.current.getBoundingClientRect(),t=e.width,n=e.top;this.setState({height:document.documentElement.clientHeight-n,width:t})}},{key:"handleSelect",value:function(e){this.setState({selected:e})}},{key:"handleSelectColor",value:function(e){this.setState({selectColor:e.target.value})}},{key:"getSungear",value:function(e){var t=this,n=this.props.query;return this.props.getSungear(n,e).then((function(){t.setState({selected:[]})}))}},{key:"narrowClick",value:function(e){var t=this;if(e.preventDefault(),this.state.items.length){var n=this.state.items;this.getSungear(n).then((function(){t.setState((function(e){return{itemsPast:[].concat(Le(e.itemsPast),[e.itemsCurr]),itemsCurr:n,itemsFuture:[]}}))}))}}},{key:"prevClick",value:function(e){var t=this;e.preventDefault();var n=this.state.itemsPast,a=n.slice(0,n.length-1),r=n[n.length-1];this.getSungear(r).then((function(){t.setState((function(e){return{itemsCurr:r,itemsPast:a,itemsFuture:[e.itemsCurr].concat(Le(e.itemsFuture))}}))}))}},{key:"nextClick",value:function(e){var t=this;e.preventDefault();var n=Re(this.state.itemsFuture),a=n[0],r=n.slice(1);this.getSungear(a).then((function(){t.setState((function(e){return{itemsCurr:a,itemsPast:[].concat(Le(e.itemsPast),[e.itemsCurr]),itemsFuture:r}}))}))}},{key:"resetClick",value:function(){var e=this;this.getSungear().then((function(){e.setState({itemsCurr:[],itemsPast:[],itemsFuture:[]})}))}},{key:"inverseSelection",value:function(){var e=this.state.selected,t=this.props.data.intersects;this.setState({selected:f.a.difference(f.a.range(f.a.size(t)),e)})}},{key:"exportSvg",value:function(){try{!function(e,t){e.setAttribute("xmlns","http://www.w3.org/2000/svg");var n=e.outerHTML,a=new Blob(['<?xml version="1.0" standalone="no"?>\r\n',n],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}(this.canvas.current.getElementsByTagName("svg")[0],"sungear.svg")}catch(e){}}},{key:"handleSearch",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"showArrows",value:function(e){this.setState({alwaysShowArrows:e.target.checked})}},{key:"showNodeSize",value:function(e){this.setState({showNodeSize:e.target.checked})}},{key:"render",value:function(){var e=this.state,t=e.height,n=e.width,a=e.selected,o=e.items,i=e.searchTerm,l=e.selectColor,c=e.alwaysShowArrows,s=e.showNodeSize,u=this.props.data;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{ref:this.canvas,className:"col-8 w-100 p-0"},r.a.createElement(Ce,{width:n,height:t,data:u,selected:a,onSelectChange:this.handleSelect.bind(this),strokeColor:l,fillColor:l,alwaysShowArrows:c,showNodeSize:s})),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"btn-group mr-1"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.narrowClick.bind(this)},r.a.createElement(D.a,{icon:"filter",className:"mr-1"}),"Narrow"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.inverseSelection.bind(this)},r.a.createElement(D.a,{icon:"object-group",className:"mr-1"}),"Inverse"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.resetClick.bind(this)},r.a.createElement(D.a,{icon:"sync",className:"mr-1"}),"Reset")))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"d-inline mr-2"},"Views:"),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!this.state.itemsPast.length,onClick:this.prevClick.bind(this)},r.a.createElement(D.a,{icon:"arrow-circle-left",className:"mr-1"}),"Previous"),r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!this.state.itemsFuture.length,onClick:this.nextClick.bind(this)},"Next",r.a.createElement(D.a,{icon:"arrow-circle-right",className:"ml-1"}))))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"btn-group"},r.a.createElement("a",{className:"btn btn-primary",href:"data:text/plain,"+f.a.join(this.state.items,"\n")+"\n",download:"items.txt"},r.a.createElement(D.a,{icon:"file-alt",className:"mr-1"}),"Export Items"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.exportSvg.bind(this)},r.a.createElement(D.a,{icon:"image",className:"mr-1"}),"Export Image")))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-inline"},r.a.createElement("input",{type:"checkbox",id:"showarrows",className:"form-control",checked:c,onChange:this.showArrows.bind(this)}),r.a.createElement("label",{htmlFor:"showarrows",className:"ml-1"},"Always Show Node Arrows")))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-inline"},r.a.createElement("input",{type:"checkbox",id:"showsize",className:"form-control",checked:s,onChange:this.showNodeSize.bind(this)}),r.a.createElement("label",{htmlFor:"showsize",className:"ml-1"},"Show Node Size")))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-inline"},r.a.createElement("label",{className:"mr-2",htmlFor:"color"},"Selection Color:"),r.a.createElement("input",{type:"color",id:"color",className:"form-control",style:{minWidth:"50px"},value:l,onChange:this.handleSelectColor.bind(this)})))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("h6",null,"Info:"),r.a.createElement("p",{className:"text-secondary m-0"},"Ctrl + Left Click to select multiple nodes."),r.a.createElement("p",{className:"text-secondary m-0"},"Multiple selection on list names (vertices) adds all nodes of the list to the selection. New nodes will be added as a ",r.a.createElement("span",{className:"font-weight-bold"},"Union")," or ",r.a.createElement("span",{className:"font-weight-bold"},"Intersection "),"based on the selection mode selected on the left."))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement(ze,{value:i,onChange:this.handleSearch.bind(this),data:u,selected:a,onSelectChange:this.handleSelect.bind(this)}))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement(je,{data:u,selected:a,onSelectChange:this.handleSelect.bind(this)}))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,o.length.toLocaleString()," items selected"),r.a.createElement(We,{className:"list-group",items:o,listRef:this.listRef}))))))}}]),n}(r.a.Component);Je.propTypes={query:w.a.string,data:w.a.object,getSungear:w.a.func};var Qe=Object(c.b)((function(e){return{query:e.query,data:e.data}}),{getSungear:N})(Je);function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=at(e);if(t){var r=at(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return nt(this,n)}}function nt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(i,e);var t,n,a,o=tt(i);function i(){return Ge(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(l.b,{to:"/",className:"navbar-brand"},"Sungear"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{exact:!0,className:"nav-link",to:"/",activeClassName:"active"},"Home"))),r.a.createElement("div",{className:"d-inline mr-2"},r.a.createElement("a",{className:"github-button",href:"https://github.com/zachary822","data-size":"large","aria-label":"Follow @zachary822 on GitHub"},"Follow @zachary822")),r.a.createElement("div",{className:"d-inline"},r.a.createElement("a",{className:"github-button",href:"https://github.com/zachary822/sungear","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star zachary822/sungear on GitHub"},"Star"))),r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/",exact:!0,component:I}),r.a.createElement(g.b,{path:"/sungear",component:Qe}),r.a.createElement(g.a,{to:"/"})))}}])&&Ze(t.prototype,n),a&&Ze(t,a),i}(r.a.Component);i.a.render(r.a.createElement(c.a,{store:b},r.a.createElement(l.a,null,r.a.createElement(rt,null))),document.getElementById("app"))}},[[34,1,2]]]);